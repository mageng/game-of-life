window.js_buildtime="2014-09-24 18:02:59",this.App||(this.App={}),this.App.CanvasHandler=function(){function a(a,b){this.canvasElement=null!=a?a:{},null==b&&(b=10),this.canvasElement.getContext?(this.rows=this.columns=b,this.context=this.canvasElement.getContext("2d"),this.prepareCanvas()):this.canvasElement=void 0}return a.prototype.context=void 0,a.prototype.canvasElement=void 0,a.prototype.width=0,a.prototype.height=0,a.rows=0,a.columns=0,a.prototype.prepareCanvas=function(){return null!=this.canvasElement?(this.width||(this.width=jQuery(this.canvasElement).width()),this.height||(this.height=jQuery(this.canvasElement).height()),this.cellWidth||(this.cellWidth=this.width/this.columns),this.cellHeight||(this.cellHeight=this.height/this.rows),this.context.clearRect(0,0,this.width,this.height)):void 0},a.prototype.renderCell=function(a){var b,c;null!=this.canvasElement&&(b=a.currentState.x,c=a.currentState.y,a.draw===!1&&this.context.clearRect(b*this.cellWidth,c*this.cellHeight,this.cellWidth,this.cellHeight),a.draw===!0&&(this.context.fillStyle=a.currentState.color,this.roundRect(this.context,b*this.cellWidth,c*this.cellHeight,this.cellWidth,this.cellHeight,3)))},a.prototype.roundRect=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath(),a.strokeStyle="#FFF",a.stroke(),a.fill()},a}(),this.App.Cell=function(){function a(a){var b,c,d,e;null==a&&(a={}),d=this.defaultState;for(b in d)c=d[b],this.currentState[b]=c;for(b in a)c=a[b],this.currentState[b]=c;e=this.currentState;for(b in e)c=e[b],this.setNextState(b,c);this.setDrawStatus()}return a.prototype.defaultState={alive:!1,x:0,y:0,color:"#EEEEEE"},a.prototype.nextState={},a.prototype.currentState={},a.prototype.draw=!1,a.prototype.changed=!1,a.prototype.setDrawStatus=function(){this.currentState.alive===!0&&(this.draw=!0,this.currentState.color="#111111")},a.prototype.age=function(){var a,b,c;this.draw=!1,c=this.nextState;for(a in c)b=c[a],this.currentState[a]!==this.nextState[a]&&(this.changed=!0),this.currentState[a]=b;return this.currentState.alive===!0?this.setDrawStatus():void 0},a.prototype.setNextState=function(a,b){null==b&&(b=void 0),this.nextState[a]=b},a}(),this.App.cellFactory={newCell:function(a,b){return null==a&&(a={}),null==b&&(b=!1),b&&(a.alive=1===Math.floor(5*Math.random())),jQuery.extend(!0,{},new App.Cell(a))}},this.App||(this.App={}),this.App.GameRunner={defaultOptions:{generationLength:.7,generation:0,active:!1,gridLength:10,randomBoard:!1},cells:[],currentOptions:{},active:!1,canvasHandler:void 0,cellFactory:void 0,init:function(a,b,c){var d,e,f;this.canvasHandler=a,this.cellFactory=b,null==c&&(c={}),f=this.defaultOptions;for(d in f)e=f[d],this.setOption(d,e);for(d in c)e=c[d],this.setOption(d,e);this.createCells(),this.setupControlls(),this.cycle()},reset:function(){var a,b,c;c=this.defaultOptions;for(a in c)b=c[a],this.setOption(a,b);this.cells=[]},setOption:function(a,b){null==b&&(b=void 0),this.currentOptions[a]=b},setupControlls:function(){return this.setupPlayPauseButton(),this.setupClearButton(),this.setupAddCellByClicking()},setupPlayPauseButton:function(){var a=this;return jQuery("#play_pause").click(function(b){return a.currentOptions.active?(a.currentOptions.active=!1,void jQuery(b.target).html("Run")):(a.currentOptions.active=!0,jQuery(b.target).html("Pause"),void a.play())})},setupClearButton:function(){var a=this;return jQuery("#clear").click(function(){var b,c,d,e;for(e=a.cellList(),c=0,d=e.length;d>c;c++)b=e[c],b.nextState.alive=!1,b.age();a.cycle()})},setupAddCellByClicking:function(){var a=this;return jQuery(this.canvasHandler.canvasElement).click(function(b){var c,d,e,f,g,h,i,j;c=b.target,h=jQuery(c).offset(),e=jQuery(c).width()/a.currentOptions.gridLength,d=jQuery(c).height()/a.currentOptions.gridLength,f=b.pageX,g=b.pageY,i=Math.floor((f-h.left)/e),j=Math.floor((g-h.top)/d),a.createAndToggleCell(i,j)})},createAndToggleCell:function(a,b){var c;c=this.cells[b][a],c.nextState.alive=c.currentState.alive?!1:!0,c.age(),null!=this.canvasHandler&&this.canvasHandler.renderCell(c)},createCells:function(){var a,b,c,d,e;if(null!=this.cellFactory){for(e=[];this.cells.length<this.currentOptions.gridLength;){for(b=[];b.length<this.currentOptions.gridLength;)d=this.cells.length,c=b.length,a=this.cellFactory.newCell({x:c,y:d},this.currentOptions.randomBoard),b[b.length]=a;e.push(this.cells.push(b))}return e}},cellList:function(){return jQuery.map(this.cells,function(a){return a})},play:function(){var a=this;a=App.GameRunner,a.currentOptions.active&&(setTimeout(function(){window.requestAnimFrame(a.play)},1e3*a.currentOptions.generationLength),a.cycle())},cycle:function(){var a,b,c,d,e,f,g,h;for(this.canvasHandler.prepareCanvas(),g=this.cellList(),c=0,e=g.length;e>c;c++)a=g[c],a.draw===!0&&this.canvasHandler.renderCell(a),b=this.getAllNeighbors(a.currentState.x,a.currentState.y),2===b&&a.currentState.alive===!0&&a.setNextState("alive",!0),(b>=4||2>b)&&a.setNextState("alive",!1),3===b&&a.setNextState("alive",!0);for(h=this.cellList(),d=0,f=h.length;f>d;d++)a=h[d],a.age();this.currentOptions.generation++},getAllNeighbors:function(a,b){return this.getPerpendicularNeighbors(a,b)+this.getDiagonalNeighbors(a,b)},getPerpendicularNeighbors:function(a,b,c){return null==c&&(c=0),null!=this.cells[b-1]&&this.cells[b-1][a].currentState.alive===!0&&c++,null!=this.cells[b+1]&&this.cells[b+1][a].currentState.alive===!0&&c++,null!=this.cells[b][a-1]&&this.cells[b][a-1].currentState.alive===!0&&c++,null!=this.cells[b][a+1]&&this.cells[b][a+1].currentState.alive===!0&&c++,c},getDiagonalNeighbors:function(a,b,c){return null==c&&(c=0),this.cells[b+1]&&null!=this.cells[b+1][a+1]&&this.cells[b+1][a+1].currentState.alive===!0&&c++,this.cells[b+1]&&null!=this.cells[b+1][a-1]&&this.cells[b+1][a-1].currentState.alive===!0&&c++,this.cells[b-1]&&null!=this.cells[b-1][a+1]&&this.cells[b-1][a+1].currentState.alive===!0&&c++,this.cells[b-1]&&null!=this.cells[b-1][a-1]&&this.cells[b-1][a-1].currentState.alive===!0&&c++,c}},console.log(window.js_buildtime),window.App=this.App||(this.App={}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();